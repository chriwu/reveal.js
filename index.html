<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>Merge Hell - and how to avoid it // Parkside @Teconomy 2017 // PS_VERSION_NUMBER</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">
		<link rel="stylesheet" href="css/parkside.css">
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<script src="https://use.typekit.net/mgx2nmo.js"></script>
		<script>
			try { Typekit.load({ async: true }); } catch (e) { }
		</script>
	</head>

	<body>
		<div class="reveal">
			<span id="sha">PS_VERSION_NUMBER</span>

			<div class="slides">

				<!-- slide.cover -->
				<section data-state="sl-cover" data-timing="80" data-background-video="img/cover_clip.mp4" data-background-video-loop="true">
					<h2>Merge Hell - and how to avoid it</h2>
					<h5>Collaboration on large projects in<br/>modern software development</h5>

					<aside class="notes" data-markdown>
						### Intro
						- His name is Nelle, and I am Chris. Yeah, really quick.
						- Working at Parkside for 20 years in sum
						- We are both working on one of our larger client projects: 2 oceans / west-coast / 15 people / 30 updates to live per week
						- All the things we describe are year-proven and taken from this real-life project
						
						### opening questions
						- how many of you are taking software engineering classes?
						- how many of you have been working on teams with more than 2 people?
						- how many of you have ever used sourcecode versioning systems
					</aside>
				</section>


				<!-- slide.collaboration -->
				<section data-state="sl-collaboration" data-timing="120">
					<h3>Collaboration</h3>
					<p class="fragment">What is it? And why should you care?</p>
					<p class="fragment">It's about getting things done - better together!</p>

					<aside class="notes" data-markdown>
						### Scenario
						- deadline approaching. get things out of the door
						- split up the work among your teammates
						- if separation is good - collab is easy

						### Why
						- cope with last minute problems
						- Murphys law: on day d-1 - "what can go wrong will go wrong"
						- scale out the work
						- improve quality!
						- problems: floppy disk breaks, merge hell, hidden complexity, commits disappear

						### Samples
						- hand over floppy to Nelle (it's NOT a 3d-printed print icon)
						- show image of folks playing Nintendo
					</aside>
				</section>


				<!-- slide.collaboration-aspects -->
				<section>
					<section data-state="sl-collaboration-aspects" data-timing="120">
						<h3>Aspects of collaboration</h3>
						<p class="fragment">On Organization level: it's all about (infra)structure <span class="fragment">and workflows</span></p>
						<p class="fragment">On Code level: it's about tools ... <span class="fragment">and workflows</span></p>

						<aside class="notes" data-markdown>
							### Orga
							- office, meetingrooms, network connections, etc.
							- workflows: All-hands, standups, scrum meetings
							- but most importantly: CULTURE
								- example: include TDD budget in project planning phase (TDD: 25% overhead) => !(code goes out tested)
								- question: how many of you have heard about windows millenium? see!
							
							## Code
							- past vs present: handing over a floppy disk, index-numbering files
							- Works great in GDocs, but: in code?
							- Difficulties: large teams, oceans, team members
						</aside>
					</section>


					<!-- slide.img-collaboration -->
					<section data-state="sl-img-collaboration" data-timing="40" data-background="img/collage03_b.jpg" data-background-transition="slide">
						<aside class="notes" data-markdown>
							### Samples for collaboration
							- structures
							- workflows
							- tools
							- devices
						</aside>
					</section>


					<!-- slide.img-codesample -->
					<section data-state="sl-img-codesample" data-timing="20" data-background="img/code_sample.png" data-background-transition="slide">
						<aside class="notes" data-markdown>
							Lost in translation?
						</aside>
					</section>
				</section>


				<!-- slide.right-mix -->
				<section data-state="sl-right-mix" data-timing="180">
					<h2>Workflows and tools ...</h2>
					<p></p>
					<ul>
						<li>... can increase efficiency and improve quality.</li>
						<li>... can foster a great culture.</li>
						<li>Find the right mix!</li>
					</ul>

					<aside class="notes" data-markdown>
						### Short intro
							As software developers we try to automate things.
							Example: Version Control

						### Q: When was the first version control tool created?
						
							Next slide: Lets take a look at some tools used for creating this presentation

							- Example?: Code reviews - Github (only if there is time)

						### THIS IS TOO LONG

						### Q: Do tools influence culture or does the culture define tools?

						### Cultural differences
						As you go out into the world and search for your place in the workforce you will interview with companies that can
						be roughly divided into 4 groups:
							- Microsoft shops
							- Java shops
							- PHP shops
							- Rest of the world (Ruby, Node.JS, Python, Clojure, Elm)

						Small variations are possible, but not likely (Git in Microsoft company)
						Its about what you know and what people are comfortable with.
					</aside>
				</section>

				<!-- slide.tools -->
				<section data-state="sl-tools" data-timing="60">
					<h3>Tools</h3>
					<p>Some of the tools we use at Parkside:</p>
					<img id="tools" src="img/logos_tools.svg" alt="Some tools in use at Parkside" />

					<aside class="notes" data-markdown>
						- Anyone used something else from the list in your projects?

						- This is not an extensive list of all the tools regularly used in software development
						- Cultural differences: Microsoft, Java, PHP, rest of the world

						Actually this presentation is a great example because it is done in reveal.js.
						The entire presentation is one large html file.
						And the same file is edited by a two person team.

						Next slide: Let's concentrate on code collaboration.
						Assume we are working on a project, using versioning with git. (in the university setting?)

						- Categories: PM, Development, QA, Ops, Support

						### Questions for the audience:
							- Who wants to do PM?
							- Who wants to do development?
							- Who is for Ops?

						- What to take from this slide:
							- Tools of the software developers are a legion because there are many

						### THIS IS TOO LONG


						### PM Tools - Spectrum
							- Visual Studio Team System
							- Jira

						### Engineering Tools:
							- Same tools as PM from another perspective. A glorified TODO List.
							- Git/SVN/Mercurial/TFS for versioning
							- GitHub, GitLab, Visual Studio Team System for pull requests, code reviews
							- Skype for Teams/Hipchat/Slack for communication

						### QA
							- Same versioning tools as Engineering from another perspective.
							- Skype for Teams/Hipchat/Slack for communication
							- Unit tests, automated tests

						### Ops Questions for the audience
					</aside>
				</section>

				<!-- slide.proven-concepts -->
				<section data-state="sl-proven-concepts" data-timing="120">
					<h3>Proven concepts</h3>
					<p>Years-long experience, proven to be working on real-world large-scale projects.</p>
					<ul>
						<li>Feature branch workflow</li>
						<li>Alternative: Git-Flow</li>
						<li>Alternative: Forking</li>
					</ul>
					<aside class="notes" data-markdown>
						- The core idea behind the Feature Branch Workflow 
						- All feature development should take place in a dedicated branch instead of the master branch.

						Next slide: For now we concentrate on FBW
					</aside>
				</section>


				<section data-state="sl-feature-branch-workflow-image">
					<h3>Feature branch workflow</h3>

					<img src="img/infographic_n2.svg" />

					<aside class="notes" data-markdown>
						- Q: Anyone used any git workflow in your projects?
					</aside>
				</section>

				<section data-state="sl-feature-branch-workflow">

					<h3>Feature branch workflow</h3>
					<p>How does it work?</p>
					<ul>
						<li>Create feature branch from master</li>
						<li>Keep branch up to date (at least once a day)</li>
						<li>Create a pull request - Code-review</li>
						<li>Branch-specific QA</li>
						<li>Deploy or Merge to master</li>
					</ul>

					<aside class="notes" data-markdown>
						- Next slide: This is an ideal vision of an ideal system.
							Features are clearly defined. Customer never changes their mind.
							Work is done in a couple of days. Features are completely independent.
							And then there is reality.

						- Start development == Create a feature branch from master
						- Use rebase to keep feature up to date.
						- Finish development == Put branch up for code-review (different companies, different rules)
							- Other than the obvious one there are other advantages
							- Avoid knowledge silo, Keeps others up to date
						- Approved == Deploy feature branch to QA
							- Collaboration with QA
						- Tested == Merge to master
						- Ops decides when == Deploy master
						- Alternative == deploy feature branch right away

						- Rebase is a bit of a sensitive subject
						- Rebase is more complicated for long running branches
						- Rebase rewrites history (considered impolite)

						- What to take from this slide:
							- Workflow works! Collaboration on code reviews, QA, Ops/DevOps.
						</aside>
				</section>

				<!-- slide.merge-hell -->
				<section data-state="sl-merge-hell-intro">
					<h3>Merge Hell</h3>
					<p>What is it?</p>

					<img src="img/merge.png" />
					<aside class="notes" data-markdown>
							- happens when you are ready to merge your feature (usually right before deadline) 

							- Q: Does this sound familiar?

					</aside>
				</section>

				<section data-state="sl-merge-hell-infographic">
					<h3>Merge Hell</h3>
					<p>What is it?</p>

					<img src="img/infographic_n1.svg" />

					<aside class="notes" data-markdown>
						- you discover a change set on master
						- Q: Does this sound familiar?
					</aside>
				</section>

				<section data-state="sl-merge-hell-story">
					<h3>Merge Hell</h3>
					<p>What is it?</p>

					<img src="img/merge_story.jpeg" />
					<aside class="notes" data-markdown>
						- the bigger the team, the worse the conflicts are

						- merging it all is time consuming
						- you discover a change set on master
						- loose more time
						- you discover a change set on master

						- Q: Does this sound familiar?

						- the bigger the team, the worse the conflicts are
					</aside>
				</section>

				<!-- slide.merge-hell -->
				<section data-state="sl-merge-hell-reasons" data-timing="150">
					<h3>Merge Hell</h3>
					<p>How did we end up here?</p>
					<ul>
						<li class="fragment">Long running branches</li>
						<li class="fragment">Epic branches</li>
						<li class="fragment">Refactoring</li>
					</ul>

					<aside class="notes" data-markdown>
						Most common reasons to end up in merge hell.

						### Long running branches
						Single developer working on a really big feature.
						Running in isolation.
						Solutions: Keep it small! Sync with master often! Use feature flags! Collaborate!

						### Epic branches
						Many developers working on a composite feature
						Solution: Use feature flags

						### Refactoring
						Solution: Have a day for it!
						Agile approach! Has to be done!
						Dont plan for the future. Fail fast.

					</aside>
				</section>


				<!-- slide.big-picture -->
				<section data-transition="fade">
					<section data-state="sl-big-picture" data-timing="60">
						<h3>The Big Picture</h3>
						<img id="schema" src="img/big-picture.svg" alt="The Big Picture - schema" />

						<aside class="notes" data-markdown>
							### Definitions
							- Slack: com tool
							- Github: online version control repository
							- CircleCI: Continuous Integration / Continuous Deployment platform
							- Kubernetes: Cluster manager for Docker containers
							- GKE / Google Container Engine: PaaS, built on Kubernetes
						</aside>
					</section>


					<section data-state="sl-magic" data-timing="60" data-background="img/big-picture.svg" data-transition="fade" data-background-transition="fade">
						<h3>The magic</h3>
						<ol>
							<li class="fragment">Git commit hook => triggers CircleCI build</li>
							<li class="fragment">CircleCI builds artifacts => new container image</li>
							<li class="fragment">Image is pushed to GCP registry</li>
							<li class="fragment">Kubernetes hot-swaps image on running cluster</li>
							<li class="fragment">Status messages are send to Slack</li>
						</ol>
						<p class="fragment">
							Git SHA:&nbsp;
							<span id="ps-version-number">PS_VERSION_NUMBER</span>
						</p>


						<aside class="notes" data-markdown>
							
						</aside>
					</section>


					<section data-state="sl-kubernetes-cheatsheet" data-timing="20">
						<h3>Kubernetes Cheatsheet</h3>
						<pre><code data-trim data-noescape class="stretch python">
								# configure gcloud cli components
								gcloud auth login
								gcloud config set project ps-tec-17
								gcloud container clusters get-credentials cluster-ps-tec-17
								gcloud config set container/cluster cluster-ps-tec-17

								# build docker image and test it
								docker build -t "eu.gcr.io/ps-teconomy-2017/ps-tec-17:latest" .
								docker run -p 80:8000 eu.gcr.io/ps-teconomy-2017/ps-tec-17:latest

								# push image to GCP registry
								gcloud docker — push eu.gcr.io/ps-teconomy-2017/ps-tec-17:latest

								# create deployment and service
								kubectl run demo --image=eu.gcr.io/ps-teconomy-2017/ps-tec-17:latest --port 8000
								kubectl expose deployment demo --type=LoadBalancer --port 80 --target-port 8000

								# update image
								kubectl set image deployment/demo demo=eu.gcr.io/ps-teconomy-2017/ps-tec-17:latest
							</code></pre>

						<aside class="notes" data-markdown></aside>
					</section>

				</section>


				<!-- slide.authors -->
				<section data-state="sl-authors" data-timing="60" data-background="img/leafs.jpg" data-background-transition="fade-in">
					<div class="author">
						<h3>Chris Werding</h3>
						<ul>
							<li>VP of Engineering<br/>5 years @ Parkside</li>
							<li>Team Lead / Software Architect / Project Manager</li>
							<li>Dotnet / Java / Javascript / Scalability / Architecture / Design Patterns</li>
						</ul>
					</div>
					<div class="author">
						<h3>Nelle Simic</h3>
						<ul>
							<li>Principal Software Engineer<br/>12 years @ Parkside</li>
							<li>Software Architect / Guru / Engineer / Consultant</li>
							<li>Java / Algorithmics / React / AngularJS / Graphics Engineering</li>
						</ul>
					</div>

					<aside class="notes" data-markdown>
						- Anecdote Chris: How I deleted the entire CVS repo on my first day</p>
						- Nelle: 12 years at Parkside
						- Chris: 5 years
					</aside>
				</section>


				<!-- slide.company -->
				<section data-state="sl-company" data-timing="50" data-background="img/leafs.jpg" data-background-transition="fade-in">
					<h3>We are Parkside</h3>
					<p>45+ employees / 15 nations / 18 languages / international clients / large-scale projects / headquarters @Graz</p>

					<br/>
					<h5>Feel like talking?</h5>
					<p>Swing by and let's pursue the conversation! We will be at the Parkside stand the whole afternoon, find us @<i>awesome-location-desc-goes-here</i>						</p>

					<aside class="notes" data-markdown>
						### Claims
						- stuff you've seen in this demo: we do it everyday
						- best job in the world
						- most of your awake time is spent on the job - rather spend it with people you enjoy working with
						- diversity is always an asset
					</aside>
				</section>


				<!-- slide.tldr -->
				<section data-state="sl-tldr" data-timing="120" data-background="img/leafs.jpg" data-background-transition="fade-in" data-transition-speed="slow">
					<h3>tl;dr</h3>
					<ul>
						<li class="fragment">Work with nice people... <span class="fragment">and talk to them!</span></li>
						<li class="fragment">Use great tools... <span class="fragment">that fit your needs</span></li>
						<li class="fragment">
							<i>Do amazing things</i>
						</li>
					</ul>

					<p class="fragment">https://github.com/chriwu/ps-tec-2017</p>

					<aside class="notes" data-markdown>
						### Learnings
						- avoid long running branches
						- keep PRs small
						- code styling / linting: what was hard to write should NOT be hard to read
						- use the right tools - hammer vs nails

						### FIN
						- which questions do you have?
						- thank you very much for your attention
						- you can find the slides @
					</aside>
				</section>


				<!-- slide.merci -->
				<section data-state="sl-merci" data-timing="60" data-background="img/parkside_team.jpg">
					<h3>danke / thank you / kiitos / merci / hvala<br/>gracias / شكرا / tack / obrigado</h3>
					<div id="hiring">
						<h4>Parkside is hiring</h4>
						<p>
							https://parkside.at/en/careers<br/> work@parkside.at
						</p>
					</div>

					<aside class="notes" data-markdown>Notes go here.</aside>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script>
			Reveal.initialize({
				history: true,
				defaultTiming: 120,
				keyboard: {
					86: function () {
						document.querySelector("#sha").classList.toggle("visible");
					},
				},
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>

	</body>

</html>